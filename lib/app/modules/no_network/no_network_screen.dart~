import 'package:flutter/material.dart';
import 'package:google_fonts/google_fonts.dart';
import 'package:lottie/lottie.dart'; // For animations, make sure it's in your pubspec.yaml
import 'package:get/get.dart'; // For using GetX themes if available, and snackbars.

import '../../themes/app_theme.dart'; // Assuming your AppColors are defined here

class NoNetworkScreen extends StatelessWidget {
  final VoidCallback onRetry;
  final String? message; // Optional custom message

  const NoNetworkScreen({
    Key? key,
    required this.onRetry,
    this.message,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: AppColors.neutralBackground, // Use your app's background color
      body: Center(
        child: Padding(
          padding: const EdgeInsets.symmetric(horizontal: 32.0),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.center,
            children: [
              // Lottie Animation for network issue (like the coffee machine with ERR)
              // You'll need to replace this with your specific Lottie asset.
              Lottie.asset(
                'assets/animations/no_internet_connection.json', // Placeholder: Replace with your actual Lottie animation file
                // A good resource for Lottie animations: https://lottiefiles.com/
                // Search for "no internet", "offline", "error", etc.
                width: 200,
                height: 200,
                fit: BoxFit.contain,
                repeat: true, // Animation repeats while user is on this screen
                errorBuilder: (context, error, stackTrace) {
                  // Fallback to a static icon if Lottie fails to load
                  debugPrint('Error loading Lottie animation for no network: $error');
                  return Icon(
                    Icons.cloud_off_rounded,
                    size: 150,
                    color: AppColors.textLight.withOpacity(0.6),
                  );
                },
              ),
              const SizedBox(height: 40), // Increased spacing

              Text(
                message ?? 'Your internet is a little wonky', // Default or custom message
                textAlign: TextAlign.center,
                style: GoogleFonts.poppins(
                  fontSize: 24,
                  fontWeight: FontWeight.bold,
                  color: AppColors.textDark,
                ),
              ),
              const SizedBox(height: 16),

              Text(
                'Try switching to a different connection or\nreset your internet to place an order.',
                textAlign: TextAlign.center,
                style: GoogleFonts.poppins(
                  fontSize: 16,
                  color: AppColors.textDark.withOpacity(0.7),
                ),
              ),
              const SizedBox(height: 40), // Increased spacing

              ElevatedButton(
                onPressed: onRetry, // Calls the provided retry function
                style: ElevatedButton.styleFrom(
                  backgroundColor: AppColors.primaryPurple, // Use your primary color
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(12), // Rounded corners
                  ),
                  padding: const EdgeInsets.symmetric(horizontal: 40, vertical: 16),
                  elevation: 5, // Add subtle shadow
                ),
                child: Text(
                  'RETRY',
                  style: GoogleFonts.poppins(
                    fontSize: 18,
                    fontWeight: FontWeight.w600,
                    color: Colors.white,
                    letterSpacing: 1.5, // Spacing for "RETRY"
                  ),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
